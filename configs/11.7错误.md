phoenix_backend   | ERROR:root:保存登录状态失败
                                                                                                                                                                                                  
                                                                                                                                                                                                  
                                                                                                                                                                                                  
phoenix_db        |                                 token, username, user_group, unit, hierarchy,

                                                                                                                                                                                                  
phoenix_backend   | Traceback (most recent call last):
phoenix_db        |                                 permissions, allowed_units, issued_at, expires_at, last_accessed
                                                                                                                                                                                                  
                                                                                                                                                                                                  
phoenix_db        |                             ) VALUES (
phoenix_backend   |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context

                                                                                                                                                                                                  
phoenix_db        |                                 'tk2UccD-8hqib5e9-lblslI-DBpwyrJfJ4aMobjUOEY', 'ww870411', 'Global_admin', '系统管理员', 100,
                                                                                                                                                                                                  
                                                                                                                                                                                                  
phoenix_backend   |     self.dialect.do_execute(                                                                                                                                                  

                                                                                                                                                                                                  
phoenix_db        |                                 :permissions::jsonb, :allowed_units::jsonb, '2025-11-07T21:32:34.307745+08:00'::timestamptz, '2026-02-05T21:32:34.307745+08:00'::timestamptz, '2025-11-07T21:32:34.307745+08:00'::timestamptz
phoenix_backend   |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
phoenix_db        |                             )                                                                                                                                                 
                                                                                                                                                                                                  
phoenix_backend   |     cursor.execute(statement, parameters)

phoenix_db        |                             ON CONFLICT (token) DO UPDATE                                                                                                                     
phoenix_backend   | psycopg2.errors.SyntaxError: syntax error at or near ":"
phoenix_backend   | LINE 7:                             :permissions::jsonb, :allowed_un...                                                                                                       
phoenix_db        |                                 username = EXCLUDED.username,                                                                                                                 
phoenix_backend   |                                     ^                                                                                                                                         
                                                                                                                                                                                                  
phoenix_backend   |                                                                                                                                                                               
                                                                                                                                                                                                  

phoenix_db        |                                 unit = EXCLUDED.unit,
phoenix_backend   |
phoenix_db        |                                 hierarchy = EXCLUDED.hierarchy,                                                                                                               
phoenix_backend   | The above exception was the direct cause of the following exception:
phoenix_db        |                                 permissions = EXCLUDED.permissions,                                                                                                           
                                                                                                                                                                                                  
                                                                                                                                                                                                  
phoenix_backend   |
phoenix_db        |                                 allowed_units = EXCLUDED.allowed_units,
phoenix_backend   | Traceback (most recent call last):                                                                                                                                            
phoenix_db        |                                 expires_at = EXCLUDED.expires_at,                                                                                                             

                                                                                                                                                                                                  
phoenix_backend   |   File "/app/backend/services/auth_manager.py", line 429, in _persist_session
phoenix_db        |                                 last_accessed = EXCLUDED.last_accessed
phoenix_backend   |     db.execute(                                                                                                                                                               
                                                                                                                                                                                                  
phoenix_db        |
phoenix_backend   |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute                                                                             
phoenix_backend   |     return self._execute_internal(                                                                                                                                            
phoenix_backend   |            ^^^^^^^^^^^^^^^^^^^^^^^                                                                                                                                            
phoenix_backend   |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2258, in _execute_internal                                                                   
phoenix_backend   |     result = conn.execute(                                                                                                                                                    
phoenix_backend   |              ^^^^^^^^^^^^^
phoenix_backend   |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute                                                                             
phoenix_backend   |     return meth(
phoenix_backend   |            ^^^^^                                                                                                                                                              
phoenix_backend   |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection                                                              
phoenix_backend   |     return connection._execute_clauseelement(                                                                                                                                 
phoenix_backend   |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                                                                 
phoenix_backend   |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
phoenix_backend   |     ret = self._execute_context(                                                                                                                                              
phoenix_backend   |           ^^^^^^^^^^^^^^^^^^^^^^                                                                                                                                              
phoenix_backend   |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context                                                                    
phoenix_backend   |     return self._exec_single_context(                                                                                                                                         
phoenix_backend   |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
phoenix_backend   |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context                                                                
phoenix_backend   |     self._handle_dbapi_exception(                                                                                                                                             
phoenix_backend   |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
phoenix_backend   |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e                                                                                                             
phoenix_backend   |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context                                                                
phoenix_backend   |     self.dialect.do_execute(                                                                                                                                                  
phoenix_backend   |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
phoenix_backend   |     cursor.execute(statement, parameters)                                                                                                                                     
phoenix_backend   | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.SyntaxError) syntax error at or near ":"                                                                                    
phoenix_backend   | LINE 7:                             :permissions::jsonb, :allowed_un...
phoenix_backend   |                                     ^                                                                                                                                         
phoenix_backend   |                                                                                                                                                                               
phoenix_backend   | [SQL:                                                                                                                                                                         
phoenix_backend   |                         INSERT INTO auth_sessions (                                                                                                                           
phoenix_backend   |                             token, username, user_group, unit, hierarchy,
phoenix_backend   |                             permissions, allowed_units, issued_at, expires_at, last_accessed                                                                                  
phoenix_backend   |                         ) VALUES (                                                                                                                                            
phoenix_backend   |                             %(token)s, %(username)s, %(user_group)s, %(unit)s, %(hierarchy)s,                                                                                 
phoenix_backend   |                             :permissions::jsonb, :allowed_units::jsonb, %(issued_at)s, %(expires_at)s, %(issued_at)s                                                          
phoenix_backend   |                         )
phoenix_backend   |                         ON CONFLICT (token) DO UPDATE                                                                                                                         
phoenix_backend   |                         SET                                                                                                                                                   
phoenix_backend   |                             username = EXCLUDED.username,
phoenix_backend   |                             user_group = EXCLUDED.user_group,                                                                                                                 
phoenix_backend   |                             unit = EXCLUDED.unit,                                                                                                                             
phoenix_backend   |                             hierarchy = EXCLUDED.hierarchy,                                                                                                                   
phoenix_backend   |                             permissions = EXCLUDED.permissions,
phoenix_backend   |                             allowed_units = EXCLUDED.allowed_units,                                                                                                           
phoenix_backend   |                             expires_at = EXCLUDED.expires_at,                                                                                                                 
phoenix_backend   |                             last_accessed = EXCLUDED.last_accessed                                                                                                            
phoenix_backend   |                         ]                                                                                                                                                     
phoenix_backend   | [parameters: {'token': 'tk2UccD-8hqib5e9-lblslI-DBpwyrJfJ4aMobjUOEY', 'username': 'ww870411', 'user_group': 'Global_admin', 'unit': '系统管理员', 'hierarchy': 100, 'issued_at': datetime.datetime(2025, 11, 7, 21, 32, 34, 307745, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800))), 'expires_at': datetime.datetime(2026, 2, 5, 21, 32, 34, 307745, tzinfo=datetime.timezone(datetime.timedelta(seconds=28800)))}]
phoenix_backend   | (Background on this error at: https://sqlalche.me/e/20/f405)
phoenix_backend   | INFO:     172.19.0.1:42516 - "POST /api/v1/auth/login HTTP/1.1" 500 Internal Server Error