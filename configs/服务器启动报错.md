ww870411@instance-20250906-2216:~/app/phoenix$ docker compose -f docker-compose.server.yml up --build
WARN[0000] /home/ww870411/app/phoenix/docker-compose.server.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion
[+] Building 4.3s (34/34) FINISHED
 => [internal] load local bake definitions                                 0.0s
 => => reading from stdin 999B                                             0.0s
 => [web internal] load build definition from Dockerfile.web               0.1s
 => => transferring dockerfile: 689B                                       0.0s
 => [backend internal] load build definition from Dockerfile.prod          0.1s
 => => transferring dockerfile: 902B                                       0.0s
 => [web internal] load metadata for docker.io/library/node:20-alpine      2.3s
 => [backend internal] load metadata for docker.io/library/python:3.12-sl  2.2s
 => [web internal] load metadata for docker.io/library/nginx:1.27-alpine   2.2s
 => [backend internal] load .dockerignore                                  0.0s
 => => transferring context: 2B                                            0.0s
 => [backend internal] load build context                                  0.2s
 => => transferring context: 3.12kB                                        0.1s
 => [backend builder 1/5] FROM docker.io/library/python:3.12-slim@sha256:  0.0s
 => [web builder 1/6] FROM docker.io/library/node:20-alpine@sha256:6178e7  0.0s
 => [web internal] load build context                                      0.2s
 => => transferring context: 3.01kB                                        0.1s
 => [web stage-1 1/5] FROM docker.io/library/nginx:1.27-alpine@sha256:656  0.0s
 => CACHED [backend runtime 2/6] WORKDIR /app                              0.0s
 => CACHED [backend runtime 3/6] RUN apt-get update && apt-get install -y  0.0s
 => CACHED [backend builder 2/5] WORKDIR /build                            0.0s
 => CACHED [backend builder 3/5] RUN apt-get update && apt-get install -y  0.0s
 => CACHED [backend builder 4/5] COPY backend/requirements.txt .           0.0s
 => CACHED [backend builder 5/5] RUN pip install --upgrade pip     && pip  0.0s
 => CACHED [backend runtime 4/6] COPY --from=builder /install /usr/local   0.0s
 => CACHED [backend runtime 5/6] COPY backend /app/backend                 0.0s
 => CACHED [backend runtime 6/6] COPY backend_data /app/data-template      0.0s
 => [backend] exporting to image                                           0.1s
 => => exporting layers                                                    0.0s
 => => writing image sha256:3a8769a600c9e3ea0002dc52067a12d145286ba65143f  0.0s
 => => naming to docker.io/library/phoenix-backend                         0.0s
 => CACHED [web stage-1 2/5] WORKDIR /etc/nginx                            0.0s
 => CACHED [web stage-1 3/5] COPY deploy/nginx.prod.conf /etc/nginx/conf.  0.0s
 => CACHED [web builder 2/6] WORKDIR /app                                  0.0s
 => CACHED [web builder 3/6] COPY frontend/package.json frontend/package-  0.0s
 => CACHED [web builder 4/6] RUN npm ci                                    0.0s
 => CACHED [web builder 5/6] COPY frontend/ /app                           0.0s
 => CACHED [web builder 6/6] RUN npm run build                             0.0s
 => CACHED [web stage-1 4/5] COPY --from=builder /app/dist /usr/share/ngi  0.0s
 => CACHED [web stage-1 5/5] RUN mkdir -p /var/www/certbot                 0.0s
 => [web] exporting to image                                               0.1s
 => => exporting layers                                                    0.0s
 => => writing image sha256:0b08801e040fdc8a7d1d9354763a4f97a0bbd916109d7  0.0s
 => => naming to docker.io/library/phoenix-web                             0.0s
 => [backend] resolving provenance for metadata file                       0.1s
 => [web] resolving provenance for metadata file                           0.1s
WARN[0005] Found orphan containers ([phoenix_frontend_prod]) for this project. If you removed or renamed this service in your compose file, you can run this command with the --remove-orphans flag to clean it up.
[+] Running 4/4
 ✔ phoenix-backend            Built                                        0.0s
 ✔ phoenix-web                Built                                        0.0s
 ✔ Container phoenix-backend  Recreated                                    0.4s
 ✔ Container phoenix-web      Recreated                                    0.2s
Attaching to phoenix-backend, phoenix-certbot, phoenix-db, phoenix-web
phoenix-db  |
phoenix-db  | PostgreSQL Database directory appears to contain a database; Skipping initialization
phoenix-db  |
phoenix-db  | 2025-10-31 05:06:43.559 UTC [1] LOG:  starting PostgreSQL 15.14 on x86_64-pc-linux-musl, compiled by gcc (Alpine 14.2.0) 14.2.0, 64-bit
phoenix-db  | 2025-10-31 05:06:43.559 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
phoenix-db  | 2025-10-31 05:06:43.559 UTC [1] LOG:  listening on IPv6 address "::", port 5432
phoenix-db  | 2025-10-31 05:06:43.652 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
phoenix-db  | 2025-10-31 05:06:43.673 UTC [28] LOG:  database system was shut down at 2025-10-31 05:06:24 UTC
phoenix-db  | 2025-10-31 05:06:43.870 UTC [1] LOG:  database system is ready to accept connections
phoenix-web  | /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
phoenix-web  | /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
phoenix-web  | /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
phoenix-web  | 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
phoenix-web  | 10-listen-on-ipv6-by-default.sh: info: /etc/nginx/conf.d/default.conf differs from the packaged version
phoenix-web  | /docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
phoenix-web  | /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
phoenix-web  | /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
phoenix-web  | /docker-entrypoint.sh: Configuration complete; ready for start up
phoenix-web  | 2025/10/31 05:06:46 [warn] 1#1: the "listen ... http2" directive is deprecated, use the "http2" directive instead in /etc/nginx/conf.d/default.conf:17
phoenix-web  | nginx: [warn] the "listen ... http2" directive is deprecated, use the "http2" directive instead in /etc/nginx/conf.d/default.conf:17
phoenix-web  | 2025/10/31 05:06:46 [emerg] 1#1: open() "/etc/letsencrypt/options-ssl-nginx.conf" failed (2: No such file or directory) in /etc/nginx/conf.d/default.conf:22
phoenix-web  | nginx: [emerg] open() "/etc/letsencrypt/options-ssl-nginx.conf" failed (2: No such file or directory) in /etc/nginx/conf.d/default.conf:22
phoenix-web exited with code 1
phoenix-backend  | INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
phoenix-backend  | INFO:     Started parent process [1]
phoenix-web exited with code 1
phoenix-backend  | INFO:     Waiting for child process [8]
phoenix-backend  | INFO:     Child process [8] died
phoenix-web exited with code 1
phoenix-backend  | INFO:     Waiting for child process [9]
phoenix-backend  | INFO:     Child process [9] died
phoenix-web exited with code 1
phoenix-web exited with code 1
phoenix-backend  | INFO:     Waiting for child process [10]
phoenix-backend  | INFO:     Child process [10] died
phoenix-backend  | INFO:     Waiting for child process [9]
phoenix-backend  | INFO:     Child process [9] died
phoenix-web exited with code 1
phoenix-backend  | INFO:     Waiting for child process [13]
phoenix-backend  | INFO:     Child process [13] died
phoenix-web exited with code 1
phoenix-backend  | INFO:     Waiting for child process [14]
phoenix-backend  | INFO:     Child process [14] died
phoenix-backend  | INFO:     Waiting for child process [13]
phoenix-backend  | INFO:     Child process [13] died
phoenix-web exited with code 1
phoenix-backend  | INFO:     Waiting for child process [19]
phoenix-backend  | INFO:     Child process [19] died
phoenix-backend  | INFO:     Waiting for child process [19]
phoenix-backend  | INFO:     Child process [19] died
phoenix-backend  | INFO:     Waiting for child process [22]
phoenix-backend  | INFO:     Child process [22] died
phoenix-backend  | INFO:     Waiting for child process [22]
phoenix-backend  | INFO:     Child process [22] died
phoenix-backend  | INFO:     Waiting for child process [25]
phoenix-backend  | INFO:     Child process [25] died
phoenix-backend  | INFO:     Waiting for child process [25]
phoenix-backend  | INFO:     Child process [25] died
phoenix-backend  | INFO:     Waiting for child process [28]
phoenix-backend  | INFO:     Child process [28] died
phoenix-backend  | INFO:     Waiting for child process [28]
phoenix-backend  | INFO:     Child process [28] died
