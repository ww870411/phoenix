ww870411@instance-20250906-2216:~/app/phoenix$ bash init-certbot.sh             >> Stopping existing web service (if any)...
WARN[0000] /home/ww870411/app/phoenix/docker-compose.server.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion
[+] Stopping 1/1
 ✔ Container phoenix-web  Stopped                                          0.0s
Going to remove phoenix-web
[+] Removing 1/1
 ✔ Container phoenix-web  Removed                                          0.0s
>> Building temporary HTTP-only image...
WARN[0000] /home/ww870411/app/phoenix/docker-compose.server.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion
[+] Building 5.9s (21/21) FINISHED
 => [internal] load local bake definitions                                 0.0s
 => => reading from stdin 1.03kB                                           0.0s
 => [internal] load build definition from Dockerfile.web                   0.0s
 => => transferring dockerfile: 917B                                       0.0s
 => [internal] load metadata for docker.io/library/nginx:1.27-alpine       1.5s
 => [internal] load metadata for docker.io/library/node:20-alpine          1.6s
 => [internal] load .dockerignore                                          0.0s
 => => transferring context: 2B                                            0.0s
 => [builder 1/6] FROM docker.io/library/node:20-alpine@sha256:6178e78b97  0.0s
 => [internal] load build context                                          0.2s
 => => transferring context: 295.29kB                                      0.1s
 => [stage-1 1/7] FROM docker.io/library/nginx:1.27-alpine@sha256:65645c7  0.0s
 => CACHED [stage-1 2/7] WORKDIR /etc/nginx                                0.0s
 => CACHED [stage-1 3/7] COPY deploy/nginx.prod.conf /etc/nginx/conf.d/de  0.0s
 => CACHED [builder 2/6] WORKDIR /app                                      0.0s
 => CACHED [builder 3/6] COPY frontend/package.json frontend/package-lock  0.0s
 => CACHED [builder 4/6] RUN npm ci                                        0.0s
 => CACHED [builder 5/6] COPY frontend/ /app                               0.0s
 => CACHED [builder 6/6] RUN npm run build                                 0.0s
 => [stage-1 4/7] COPY deploy/nginx.http-only.conf /tmp/nginx.http-only.c  0.2s
 => [stage-1 5/7] RUN if [ "true" = "true" ]; then mv /tmp/nginx.http-onl  1.1s
 => [stage-1 6/7] COPY --from=builder /app/dist /usr/share/nginx/html      0.5s
 => [stage-1 7/7] RUN mkdir -p /var/www/certbot                            1.0s
 => exporting to image                                                     0.4s
 => => exporting layers                                                    0.3s
 => => writing image sha256:1a10874dbd1dff6899f7dfc1448ec8a564e14775d1903  0.0s
 => => naming to docker.io/library/phoenix-web-http                        0.1s
 => resolving provenance for metadata file                                 0.0s
[+] Building 1/1
 ✔ phoenix-web-http  Built                                                 0.0s
>> Starting temporary HTTP-only service...
WARN[0000] /home/ww870411/app/phoenix/docker-compose.server.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion
[+] Running 3/3
 ✔ Container phoenix-web-http  Started                                     4.5s
 ✔ Container phoenix-db        Started                                     0.9s
 ✔ Container phoenix-backend   Started                                     1.3s
>> Requesting certificate for platform.smartview.top...
WARN[0000] /home/ww870411/app/phoenix/docker-compose.server.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion
Saving debug log to /var/log/letsencrypt/letsencrypt.log
Requesting a certificate for platform.smartview.top

Successfully received certificate.
Certificate is saved at: /etc/letsencrypt/live/platform.smartview.top/fullchain.pem
Key is saved at:         /etc/letsencrypt/live/platform.smartview.top/privkey.pem
This certificate expires on 2026-01-29.
These files will be updated when the certificate renews.

NEXT STEPS:
- The certificate will need to be renewed before it expires. Certbot can automatically renew the certificate in the background, but you may need to take steps to enable that functionality. See https://certbot.org/renewal-setup for instructions.

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
If you like Certbot, please consider supporting our work by:
 * Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate
 * Donating to EFF:                    https://eff.org/donate-le
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
>> Stopping temporary HTTP-only service...
WARN[0001] /home/ww870411/app/phoenix/docker-compose.server.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion
[+] Stopping 1/1
 ✔ Container phoenix-web-http  Stopped                                     3.0s
Going to remove phoenix-web-http
[+] Removing 1/1
 ✔ Container phoenix-web-http  Removed                                     0.3s
>> Bringing up full stack...
WARN[0000] /home/ww870411/app/phoenix/docker-compose.server.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion
[+] Building 109.2s (41/41) FINISHED
 => [internal] load local bake definitions                                 0.0s
 => => reading from stdin 1.52kB                                           0.0s
 => [web internal] load build definition from Dockerfile.web               7.2s
 => => transferring dockerfile: 917B                                       1.4s
 => [backend internal] load build definition from Dockerfile.prod          2.3s
 => => transferring dockerfile: 902B                                       1.4s
 => [backend internal] load metadata for docker.io/library/python:3.12-sl  6.0s
 => [web-http internal] load metadata for docker.io/library/node:20-alpin  6.4s
 => [web-http internal] load metadata for docker.io/library/nginx:1.27-al  5.0s
 => [web internal] load .dockerignore                                      4.6s
 => => transferring context: 2B                                            2.2s
 => [web-http builder 1/6] FROM docker.io/library/node:20-alpine@sha256:6  0.9s
 => [web internal] load build context                                      3.0s
 => => transferring context: 3.05kB                                        1.7s
 => [web stage-1 1/7] FROM docker.io/library/nginx:1.27-alpine@sha256:656  0.0s
 => [backend internal] load build context                                 32.9s
 => => transferring context: 5.79MB                                       30.2s
 => [backend builder 1/5] FROM docker.io/library/python:3.12-slim@sha256:  0.7s
 => CACHED [web-http stage-1 2/7] WORKDIR /etc/nginx                       0.0s
 => CACHED [web-http stage-1 3/7] COPY deploy/nginx.prod.conf /etc/nginx/  0.0s
 => CACHED [web-http stage-1 4/7] COPY deploy/nginx.http-only.conf /tmp/n  0.0s
 => [web stage-1 5/7] RUN if [ "false" = "true" ]; then mv /tmp/nginx.ht  49.1s
 => CACHED [web builder 2/6] WORKDIR /app                                  0.0s
 => CACHED [web builder 3/6] COPY frontend/package.json frontend/package-  0.0s
 => CACHED [web builder 4/6] RUN npm ci                                    0.0s
 => CACHED [web builder 5/6] COPY frontend/ /app                           0.0s
 => CACHED [web builder 6/6] RUN npm run build                             0.1s
 => CACHED [web-http stage-1 5/7] RUN if [ "true" = "true" ]; then mv /tm  0.0s
 => CACHED [web-http stage-1 6/7] COPY --from=builder /app/dist /usr/shar  0.0s
 => CACHED [web-http stage-1 7/7] RUN mkdir -p /var/www/certbot            0.0s
 => [web-http] exporting to image                                          7.1s
 => => exporting layers                                                    0.0s
 => => writing image sha256:e68273d068cd11bc97125f655fa5e84643ce7b546d5a0  0.7s
 => => naming to docker.io/library/phoenix-web-http                        1.3s
 => CACHED [backend runtime 2/6] WORKDIR /app                              0.0s
 => CACHED [backend runtime 3/6] RUN apt-get update && apt-get install -y  0.0s
 => CACHED [backend builder 2/5] WORKDIR /build                            0.0s
 => CACHED [backend builder 3/5] RUN apt-get update && apt-get install -y  0.0s
 => CACHED [backend builder 4/5] COPY backend/requirements.txt .           0.0s
 => CACHED [backend builder 5/5] RUN pip install --upgrade pip     && pip  0.0s
 => CACHED [backend runtime 4/6] COPY --from=builder /install /usr/local   0.4s
 => [backend runtime 5/6] COPY backend /app/backend                        9.4s
 => [backend runtime 6/6] COPY backend_data /app/data-template             5.9s
 => [web-http] resolving provenance for metadata file                      5.5s
 => [web stage-1 6/7] COPY --from=builder /app/dist /usr/share/nginx/html  5.6s
 => [backend] exporting to image                                           6.7s
 => => exporting layers                                                    5.0s
 => => writing image sha256:3e6d7b8dc5f23a1d0cebea7fb3dd88e4bf4c5cc50e54d  0.2s
 => => naming to docker.io/library/phoenix-backend                         0.7s
 => [web stage-1 7/7] RUN mkdir -p /var/www/certbot                        8.4s
 => [backend] resolving provenance for metadata file                       1.8s
 => [web] exporting to image                                               4.2s
 => => exporting layers                                                    3.6s
 => => writing image sha256:acffbf23aff97e4aa149317f051cda94242de4274c64a  0.1s
 => => naming to docker.io/library/phoenix-web                             0.2s
 => [web] resolving provenance for metadata file                           0.3s
[+] Running 7/8
 ✔ phoenix-backend             Built                                       0.0s
 ✔ phoenix-web-http            Built                                       0.0s
 ✔ phoenix-web                 Built                                       0.0s
 ✔ Container phoenix-db        Running                                     0.0s
 ✔ Container phoenix-backend   Started                                    22.0s
 ✔ Container phoenix-web-http  Started                                     9.9s
 ⠧ Container phoenix-web       Starting                                   11.0s
 ✔ Container phoenix-certbot   Started                                     2.9s
Error response from daemon: failed to set up container networking: driver failed programming external connectivity on endpoint phoenix-web (ef31d06008826bcf28471d41872dc1078882ab9b953d33efe0a85a2ac882726d): Bind for 0.0.0.0:80 failed: port is already allocated
