请优先使用desktop-commander工具，非必要不使用serena。我的项目目前进入了冲刺阶段，方案基本上定型了，我想最后再对我们的数据库/视图表进行纠偏完善。首先，请你看一下我目前的表，配置文件为"D:\编程项目\phoenix\backend\sql\create_tables.sql"。其中需要你注意的，就是两张表，首先是daily_basic_data，这是我们每个单位（company）的基本指标表，记录每日的基本指标数据，主要是"量"；还有一张是constant_data，记录每个company的常量指标，主要是"价"。
然后是目前有的一张视图，即sum_basic_data，配置文件在此：D:\编程项目\phoenix\backend\sql\create_view.sql。它是根据数据库表daily_basic_sheet建立的，按company>按item，然后分为8个时间口径对value进行累计，这8个时间口径分别为biz_date（即为当前时间的昨日），同期日（biz_date的去年同期日），以biz_date为最后一天的近7日累计，以同期日为最后一天的近7日累计，biz_date所在月份的累计，同期日所在月份的累计，从2025年10月1日至biz_date的累计，从2024年10月1日至同期日的累计。我还加入了一些分组，比如"ZhuChengQu"是"BeiHai""XiangHai""GongRe"的汇总，而"Group"则是"ZhuChengQu""JinZhou""BeiFang""JinPu""ZhuangHe""YanJiuYuan"的汇总。但是，其中并没有计算指标。
所谓计算指标，就是例如"收入""成本""利润""单耗""效率"等指标。大多需要根据基本指标和常量指标计算得到。
现在，我改变了计划，我希望在sum_basic_data中，不出现分组，但是加入计算指标。而另外新增一张视图，名为groups，专门用于设置"ZhuChengQu"和"Group"分组，这样一来也包括对计算指标的分组聚合。
总的来说，就是视图sum_basic_data依赖数据库表daily_basic_data和constant_data，而视图groups依赖视图sum_basic_data。


==============================
【常量 period的选择】
是否统一按供暖期编码映射：biz 系=“YY-YY+1”、peer 系=“YY-1-YY”？例如 biz_date 为 2025-10-29，则 biz=“25-26”，peer=“24-25”。
回复：是的                                                             
【days_to_biz() 在各口径的取值】
我拟按“当前口径范围起点→口径末日（biz_date/peer_date）”计算：日=1；近7日=7；本月=当月日序；本供暖期=自10-01起的天数；同期口径同理。是否一致？
回复：是的                                          
【内售热收入的单价来源】
文档未列“内售热单价”常量条目，我拟使用 c.售热单价（price_heat_sales）。是否正确？ 
回复：我调整了字典，现在已经有了"price_inner_heat_sales": "内售热单价"  ，请按我设定的公式计算。
【站内耗热量的取值优先级】
对上述公司集合，是否总以“供热量-高温水销售量”覆盖（即使底表已有“站内耗热量”）？
回复：是的，而且我保证这些company底表中没有item=“站内耗热量”                                                                                            
【结果数值格式】
全厂热效率单位为 %。是否需要在视图中四舍五入保留两位小数（否则保留原始精度）？
回复：在百分比状态下，保留两位小数，如87.22%                                                                                                         
【网损/内购热相关】
字典含 eco_inner_purchased_heat_cost（内购热成本）、eco_heat_lose（网损成本），但未给公式。是否需要补充？若需要，请给出对应公式与单位。
回复：是我的疏忽，已增加了"内购热成本=网口供热量*c.内购热单价/10000          unit:万元"   

==============================

待你确认/补充（便于完成第二批）
单耗/投诉/网损口径：我将按公式新增以下 5 项到 sum_basic_data，并在 groups 聚合。请确认是否按此落地：                                                                                       
1.amount_daily_net_complaints_per_10k_m2 = 当日撤件后净投诉量 / c.挂网面积（各窗口取相应累计/面积）
回复：正确，根据分组的设定，取相应company的"c.挂网面积"累计值                                                                                      
2.rate_std_coal_per_heat = 标煤耗量 / c.供暖收费面积   
回复：正确，根据分组的设定，取相应company的"c.供暖收费面积"累计值
3.rate_heat_per_10k_m2 = 站内耗热量 / c.供暖收费面积（对你指定公司集合用“供热量-高温水销售量”）
回复：在视图sum_basic_data中，我设定了站内耗热量的适用范围，因为在此范围之外，其它company自带这个指标，所以，只需取分组单位在sum_basic_data中的站内耗热量累计值即可，同时根据分组的设定，取相应company的"c.供暖收费面积"累计值
4.rate_power_per_10k_m2 = (其中：换热站外购电量)×10000 / c.供暖收费面积
回复：正确，根据分组的设定，取相应company的"c.供暖收费面积"累计值
5.rate_water_per_10k_m2 = (换热站补水量 + 热网补水量) / c.供暖收费面积    
回复：这个公式我写错了，应该为“供暖水单耗=(其中：电厂一次网补水量+其中：换热站补水量+其中：热网补水量)/c.供暖收费面积           unit:吨/万㎡”
6.amount_heat_lose = 网口供热量 - 高温水销售量 - 售汽量×2.9518 - 站内耗热量 
回复：正确，但是帮我加个条件，仅限company=GongRe                                                                                                     
7.输出单位确认
单位分别为：件/万㎡、吨/万㎡、GJ/万㎡、kWh/万㎡、吨/万㎡、GJ。若需不同单位或保留小数位，请说明。
回复：正确     

================================
提示了一些错误：
PS D:\编程项目\phoenix> docker compose exec db psql -U postgres -d phoenix -f /app/sql/create_view.sql
time="2025-10-29T11:13:30+08:00" level=warning msg="D:\\编程项目\\phoenix\\docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
DROP VIEW
psql:/app/sql/create_view.sql:936: ERROR:  relation "base" does not exist
LINE 97:   FROM base b
                ^
DETAIL:  There is a WITH item named "base", but it cannot be referenced from this part of the query.
HINT:  Use WITH RECURSIVE, or re-order the WITH items to remove forward references.
psql:/app/sql/create_view.sql:949: NOTICE:  view "groups" does not exist, skipping
DROP VIEW
psql:/app/sql/create_view.sql:1228: ERROR:  relation "sum_basic_data" does not exist
LINE 28:   SELECT * FROM sum_basic_data
                         ^

================================
[16:31]
目前，我已经完成了对两张视图的构建，其中sum_basic_data负责各company，各item的不同时间维度的聚合，而groups负责聚合“主城区”“集团全口径”两个分组，层次分明，我觉得很好。那么现在，重要的来了，就是要构建前端页面了。你先准备一下，我们马上开始！


================================
[16:55]
我现在打算对前端页面下手，或许你已经看到了，我的前端页面从Login开始，到/projects选择项目，然后进入http://localhost:5173/projects/daily_report_25_26/pages选择页面，所谓的页面就是一些表格填报/数据审批/数据展示的网页集合。具体定义在文件：D:\编程项目\phoenix\backend_data\项目列表.json 中。现在，我打算开始做 “数据审批页面”。
此前，在数据审批页面中，我已经做了一些工作，但这些工作是基于视图缺乏“计算指标”的前提下制作的，主要使用了后台的一个程序D:\编程项目\phoenix\backend\services\runtime_expression.py。由于聚合复杂度过高，因此我今天将程序的逻辑改为了更加单纯的视图求值，而减少对python业务过程的依赖。你先看一下

================================
[17:00]