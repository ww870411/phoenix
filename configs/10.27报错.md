phoenix_backend   | INFO:     172.19.0.1:46092 - "POST /api/v1/projects/daily_report_25_26/runtime/spec/eval HTTP/1.1" 500 Internal Server Error
phoenix_db        | 2025-10-27 11:14:16.304 UTC [2847] ERROR:  syntax error at or near ":" at character 63

                                                                                                                                                                                                           


phoenix_db        | 2025-10-27 11:14:16.304 UTC [2847] STATEMENT:
phoenix_db        |             WITH anchor_dates AS (
phoenix_db        |               SELECT
phoenix_db        |                 (:biz_date::date) AS biz_date,                                                                                                                                         
phoenix_db        |                 (:biz_date::date - INTERVAL '1 year')::date AS peer_date                                                                                                               
phoenix_db        |             ),
phoenix_db        |             window_defs AS (                                                                                                                                                           
phoenix_db        |               SELECT                                                                                                                                                                   
phoenix_db        |                 biz_date, peer_date,                                                                                                                                                   
phoenix_db        |                 biz_date - INTERVAL '6 day' AS biz_7d_start,
phoenix_db        |                 peer_date - INTERVAL '6 day' AS peer_7d_start,                                                                                                                         
phoenix_db        |                 date_trunc('month', biz_date)::date AS biz_month_start,                                                                                                                
phoenix_db        |                 date_trunc('month', peer_date)::date AS peer_month_start,                                                                                                              
phoenix_db        |                 DATE '2025-10-01' AS biz_ytd_start,
phoenix_db        |                 DATE '2024-10-01' AS peer_ytd_start                                                                                                                                    
phoenix_db        |               FROM anchor_dates                                                                                                                                                        
phoenix_db        |             )                                                                                                                                                                          
phoenix_db        |             SELECT                                                                                                                                                                     
phoenix_db        |               d.item,
phoenix_db        |               COALESCE(SUM(d.value) FILTER (WHERE d.date = w.biz_date), 0) AS value_biz_date,                                                                                          
phoenix_db        |               COALESCE(SUM(d.value) FILTER (WHERE d.date = w.peer_date), 0) AS value_peer_date,                                                                                        
phoenix_db        |               COALESCE(SUM(d.value) FILTER (WHERE d.date BETWEEN w.biz_month_start AND w.biz_date), 0) AS sum_month_biz,                                                               
phoenix_db        |               COALESCE(SUM(d.value) FILTER (WHERE d.date BETWEEN w.peer_month_start AND w.peer_date), 0) AS sum_month_peer,
phoenix_db        |               COALESCE(SUM(d.value) FILTER (WHERE d.date BETWEEN w.biz_ytd_start AND w.biz_date), 0) AS sum_ytd_biz,                                                                   
phoenix_db        |               COALESCE(SUM(d.value) FILTER (WHERE d.date BETWEEN w.peer_ytd_start AND w.peer_date), 0) AS sum_ytd_peer                                                                 
phoenix_db        |             FROM daily_basic_data d                                                                                                                                                    
phoenix_db        |             CROSS JOIN window_defs w
phoenix_db        |             WHERE d.company = 'BeiHai'                                                                                                                                                 
phoenix_db        |               AND d.date BETWEEN w.peer_ytd_start AND w.biz_date                                                                                                                       
phoenix_db        |             GROUP BY d.item;             